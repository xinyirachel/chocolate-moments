{"ast":null,"code":"import _defineProperty from\"/Users/xinyi-imac/Documents/chocolate-mern/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/xinyi-imac/Documents/chocolate-mern/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/xinyi-imac/Documents/chocolate-mern/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from\"react\";import{useNavigate}from\"react-router-dom\";import axios from\"axios\";import{Button,Form}from\"react-bootstrap\";import Modal from\"react-bootstrap/Modal\";import Navigation from\"./Navigation\";import Card from'react-bootstrap/Card';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Posts(){var navigate=useNavigate();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),posts=_useState2[0],setPosts=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),updatedPost=_useState4[0],setUpdatedPost=_useState4[1];//For Modal -- update\nvar _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),show=_useState6[0],setShow=_useState6[1];var handleClose=function handleClose(){return setShow(false);};var handleShow=function handleShow(){return setShow(true);};useEffect(function(){axios.get(\"/posts\").then(function(res){console.log(res);setPosts(res.data);}).catch(function(err){return console.log(err);});},[]);var deletePost=function deletePost(id){console.log(id);axios.delete(\"/delete/\".concat(id)).then(function(res){return console.log(res);}).catch(function(err){return console.log(err);});window.location.reload();};var updatePost=function updatePost(post){// console.log(post);\nsetUpdatedPost(post);// setUpdatedPost((prev) => {\n//     return {\n//       ...prev,\n//       id: id,\n//       title: title,\n//       description: description,\n//     };\n//   });\nhandleShow();};var handleChange=function handleChange(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;setUpdatedPost(function(prev){return _objectSpread(_objectSpread({},prev),{},_defineProperty({},name,value));});};var saveUpdatedPost=function saveUpdatedPost(){// console.log(updatedPost);\naxios.put(\"/update/\".concat(updatedPost._id),updatedPost).then(function(res){return console.log(res);}).catch(function(err){return console.log(err);});handleClose();window.location.reload();};return/*#__PURE__*/_jsxs(\"div\",{className:\"section-center\",children:[/*#__PURE__*/_jsx(Navigation,{}),/*#__PURE__*/_jsx(\"h1\",{children:\"Moments\"}),/*#__PURE__*/_jsxs(Modal,{show:show,onHide:handleClose,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:\"Update a post\"})}),/*#__PURE__*/_jsx(Modal.Body,{children:/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Control,{placeholder:\"title\",name:\"title\",value:updatedPost.title?updatedPost.title:\"\",onChange:handleChange}),/*#__PURE__*/_jsx(Form.Control,{placeholder:\"description\",name:\"description\",value:updatedPost.description?updatedPost.description:\"\",onChange:handleChange})]})}),/*#__PURE__*/_jsxs(Modal.Footer,{children:[/*#__PURE__*/_jsx(Button,{variant:\"outline-dark\",onClick:handleClose,children:\"Close\"}),/*#__PURE__*/_jsx(Button,{variant:\"outline-dark\",onClick:saveUpdatedPost,children:\"Save Changes\"})]})]}),posts?/*#__PURE__*/_jsx(\"div\",{className:\"grid\",children:posts.map(function(post){return/*#__PURE__*/_jsx(Card,{style:{width:'18rem'},children:/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{children:post.title}),/*#__PURE__*/_jsx(\"p\",{children:post.description}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Button,{size:\"sm\",variant:\"outline-dark\",onClick:function onClick(){return updatePost(post);},children:\"UPDATE\"}),/*#__PURE__*/_jsx(Button,{size:\"sm\",variant:\"outline-dark\",onClick:function onClick(){return deletePost(post._id);},children:\"DELETE\"})]})]},post._id)})});})}):\"\"]});}export default Posts;","map":{"version":3,"names":["useState","useEffect","useNavigate","axios","Button","Form","Modal","Navigation","Card","Posts","navigate","posts","setPosts","updatedPost","setUpdatedPost","show","setShow","handleClose","handleShow","get","then","res","console","log","data","catch","err","deletePost","id","delete","window","location","reload","updatePost","post","handleChange","event","target","name","value","prev","saveUpdatedPost","put","_id","title","description","map","width"],"sources":["/Users/xinyi-imac/Documents/chocolate-mern/client/src/components/Posts.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { Button, Form } from \"react-bootstrap\";\nimport Modal from \"react-bootstrap/Modal\";\nimport Navigation from \"./Navigation\"\nimport Card from 'react-bootstrap/Card';\n\n\nfunction Posts() {\n  const navigate = useNavigate();\n  const [posts, setPosts] = useState([]);\n  const [updatedPost, setUpdatedPost] = useState({});\n  \n  //For Modal -- update\n\n  const [show, setShow] = useState(false);\n\n  const handleClose = () => setShow(false);\n  const handleShow = () => setShow(true);\n \n\n  useEffect(() => {\n    axios\n      .get(\"/posts\")\n      .then((res) => {\n        console.log(res);\n        setPosts(res.data);\n      })\n      .catch((err) => console.log(err));\n  }, [])\n\n\n  const deletePost = (id) => {\n    console.log(id);\n\n    axios\n      .delete(`/delete/${id}`)\n      .then((res) => console.log(res))\n      .catch((err) => console.log(err));\n\n    window.location.reload();\n  };\n\n  const updatePost = (post) => {\n    // console.log(post);\n    setUpdatedPost(post);\n    // setUpdatedPost((prev) => {\n    //     return {\n    //       ...prev,\n    //       id: id,\n    //       title: title,\n    //       description: description,\n    //     };\n    //   });\n    handleShow();\n\n    };\n\n\n  const handleChange =(event)=>{\n    const { name, value } = event.target;\n    setUpdatedPost((prev) => {\n        return {\n            ...prev,\n            [name]: value,\n        };\n    });\n  };\n\n  const saveUpdatedPost = () => {\n    // console.log(updatedPost);\n\n    axios\n      .put(`/update/${updatedPost._id}`, updatedPost)\n      .then((res) => console.log(res))\n      .catch((err) => console.log(err));\n\n    handleClose();\n    window.location.reload();\n  };\n\n  return (\n    \n    <div className='section-center'>\n        <Navigation />\n        <h1>Moments</h1>\n        \n          {/* Imported Modal(Live) */}\n          <Modal show={show} onHide={handleClose}>\n          <Modal.Header closeButton>\n            <Modal.Title>Update a post</Modal.Title>\n          </Modal.Header>\n          <Modal.Body>\n              {/* insert form here */}\n              <Form.Group>\n                  <Form.Control\n                  placeholder=\"title\"\n                  name=\"title\"\n                  value={updatedPost.title ? updatedPost.title : \"\"}\n                  onChange={handleChange}\n              />\n              <Form.Control\n                  placeholder=\"description\"\n                  name=\"description\"\n                  value={updatedPost.description ? updatedPost.description : \"\"}\n                  onChange={handleChange}\n              />\n            </Form.Group>\n              {/* insert form above */}\n          </Modal.Body>\n          <Modal.Footer>\n            <Button variant=\"outline-dark\" onClick={handleClose}>\n              Close\n            </Button>\n            <Button variant=\"outline-dark\" onClick={saveUpdatedPost}>\n              Save Changes\n            </Button>\n          </Modal.Footer>\n        </Modal>\n\n\n\n\n\n          {posts ? (\n              <div className=\"grid\">\n              {posts.map(post =>{\n                  return(\n                    \n                    <Card style={{ width: '18rem' }}>\n                      <Card.Body>\n                      <div key={post._id}>\n                          <h4>{post.title}</h4>\n                          <p>{post.description}</p>\n                          <div>\n                          <Button size=\"sm\" variant=\"outline-dark\"\n                          onClick={() =>\n                              updatePost(post)\n                            }\n                          >UPDATE</Button>\n                          <Button size=\"sm\" variant=\"outline-dark\" onClick={() => deletePost(post._id)}>DELETE</Button>\n                          </div>\n                      </div>\n                      </Card.Body>\n                    </Card>\n                  )\n              })}\n              </div>\n\n        ) : \"\"}\n    </div>\n  );\n\n}\n\nexport default Posts;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}