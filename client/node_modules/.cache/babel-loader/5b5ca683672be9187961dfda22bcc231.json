{"ast":null,"code":"var _jsxFileName = \"/Users/xinyi-imac/Documents/chocolate-mern/client/src/components/Posts.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\"; // import { useNavigate } from \"react-router-dom\";\n\nimport axios from \"axios\";\nimport { Button, Form } from \"react-bootstrap\";\nimport Modal from \"react-bootstrap/Modal\";\nimport Navigation from \"./Navigation\";\nimport Card from 'react-bootstrap/Card';\nimport { Helmet } from \"react-helmet\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Posts() {\n  _s();\n\n  // const navigate = useNavigate();\n  const [posts, setPosts] = useState([]);\n  const [updatedPost, setUpdatedPost] = useState({}); //For Modal -- update\n\n  const [show, setShow] = useState(false);\n\n  const handleClose = () => setShow(false);\n\n  const handleShow = () => setShow(true);\n\n  useEffect(() => {\n    axios.get(\"/posts\").then(res => {\n      console.log(res);\n      setPosts(res.data);\n    }).catch(err => console.log(err));\n  }, []);\n\n  const deletePost = id => {\n    console.log(id);\n    axios.delete(`/delete/${id}`).then(res => console.log(res)).catch(err => console.log(err));\n    window.location.reload();\n  };\n\n  const updatePost = post => {\n    // console.log(post);\n    setUpdatedPost(post); // setUpdatedPost((prev) => {\n    //     return {\n    //       ...prev,\n    //       id: id,\n    //       title: title,\n    //       description: description,\n    //     };\n    //   });\n\n    handleShow();\n  };\n\n  const handleChange = event => {\n    const {\n      name,\n      value\n    } = event.target;\n    setUpdatedPost(prev => {\n      return { ...prev,\n        [name]: value\n      };\n    });\n  };\n\n  const saveUpdatedPost = () => {\n    // console.log(updatedPost);\n    axios.put(`/update/${updatedPost._id}`, updatedPost).then(res => console.log(res)).catch(err => console.log(err));\n    handleClose();\n    window.location.reload();\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"section-center\",\n    children: [/*#__PURE__*/_jsxDEV(Helmet, {\n      children: [/*#__PURE__*/_jsxDEV(\"meta\", {\n        charSet: \"utf-8\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"title\", {\n        children: \"Chocolate\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"meta\", {\n        name: \"description\",\n        content: \"Chocolate moments\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Navigation, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Moments\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      show: show,\n      onHide: handleClose,\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        closeButton: true,\n        children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n          children: \"Update a post\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n        children: /*#__PURE__*/_jsxDEV(Form.Group, {\n          children: [/*#__PURE__*/_jsxDEV(Form.Control, {\n            placeholder: \"title\",\n            name: \"title\",\n            value: updatedPost.title ? updatedPost.title : \"\",\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n            placeholder: \"description\",\n            name: \"description\",\n            value: updatedPost.description ? updatedPost.description : \"\",\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          variant: \"outline-dark\",\n          onClick: handleClose,\n          children: \"Close\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"outline-dark\",\n          onClick: saveUpdatedPost,\n          children: \"Save Changes\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 11\n    }, this), posts ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid\",\n      children: posts.map(post => {\n        return /*#__PURE__*/_jsxDEV(Card, {\n          style: {\n            width: '18rem'\n          },\n          children: /*#__PURE__*/_jsxDEV(Card.Body, {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                children: post.title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 142,\n                columnNumber: 27\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: post.description\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 143,\n                columnNumber: 27\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(Button, {\n                  size: \"sm\",\n                  variant: \"outline-dark\",\n                  onClick: () => updatePost(post),\n                  children: \"UPDATE\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 145,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  size: \"sm\",\n                  variant: \"outline-dark\",\n                  onClick: () => deletePost(post._id),\n                  children: \"DELETE\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 150,\n                  columnNumber: 27\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 144,\n                columnNumber: 27\n              }, this)]\n            }, post._id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 141,\n              columnNumber: 23\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 23\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 21\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 15\n    }, this) : \"\"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Posts, \"Mw3CvxRHfYk3THhZPFGnfxa50sU=\");\n\n_c = Posts;\nexport default Posts;\n\nvar _c;\n\n$RefreshReg$(_c, \"Posts\");","map":{"version":3,"names":["useState","useEffect","axios","Button","Form","Modal","Navigation","Card","Helmet","Posts","posts","setPosts","updatedPost","setUpdatedPost","show","setShow","handleClose","handleShow","get","then","res","console","log","data","catch","err","deletePost","id","delete","window","location","reload","updatePost","post","handleChange","event","name","value","target","prev","saveUpdatedPost","put","_id","title","description","map","width"],"sources":["/Users/xinyi-imac/Documents/chocolate-mern/client/src/components/Posts.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\n// import { useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { Button, Form } from \"react-bootstrap\";\nimport Modal from \"react-bootstrap/Modal\";\nimport Navigation from \"./Navigation\"\nimport Card from 'react-bootstrap/Card';\nimport {Helmet} from \"react-helmet\";\n\n\nfunction Posts() {\n  // const navigate = useNavigate();\n  const [posts, setPosts] = useState([]);\n  const [updatedPost, setUpdatedPost] = useState({});\n  \n  //For Modal -- update\n\n  const [show, setShow] = useState(false);\n\n  const handleClose = () => setShow(false);\n  const handleShow = () => setShow(true);\n \n\n  useEffect(() => {\n    axios\n      .get(\"/posts\")\n      .then((res) => {\n        console.log(res);\n        setPosts(res.data);\n      })\n      .catch((err) => console.log(err));\n  }, [])\n\n\n  const deletePost = (id) => {\n    console.log(id);\n\n    axios\n      .delete(`/delete/${id}`)\n      .then((res) => console.log(res))\n      .catch((err) => console.log(err));\n\n    window.location.reload();\n  };\n\n  const updatePost = (post) => {\n    // console.log(post);\n    setUpdatedPost(post);\n    // setUpdatedPost((prev) => {\n    //     return {\n    //       ...prev,\n    //       id: id,\n    //       title: title,\n    //       description: description,\n    //     };\n    //   });\n    handleShow();\n\n    };\n\n\n  const handleChange =(event)=>{\n    const { name, value } = event.target;\n    setUpdatedPost((prev) => {\n        return {\n            ...prev,\n            [name]: value,\n        };\n    });\n  };\n\n  const saveUpdatedPost = () => {\n    // console.log(updatedPost);\n\n    axios\n      .put(`/update/${updatedPost._id}`, updatedPost)\n      .then((res) => console.log(res))\n      .catch((err) => console.log(err));\n\n    handleClose();\n    window.location.reload();\n  };\n\n  return (\n    \n    <div className='section-center'>\n        <Helmet>\n                <meta charSet=\"utf-8\" />\n                <title>Chocolate</title>\n                <meta name=\"description\" content=\"Chocolate moments\" />\n        </Helmet>\n\n\n        <Navigation />\n        <h1>Moments</h1>\n        \n          {/* Imported Modal(Live) */}\n          <Modal show={show} onHide={handleClose}>\n          <Modal.Header closeButton>\n            <Modal.Title>Update a post</Modal.Title>\n          </Modal.Header>\n          <Modal.Body>\n              {/* insert form here */}\n              <Form.Group>\n                  <Form.Control\n                  placeholder=\"title\"\n                  name=\"title\"\n                  value={updatedPost.title ? updatedPost.title : \"\"}\n                  onChange={handleChange}\n              />\n              <Form.Control\n                  placeholder=\"description\"\n                  name=\"description\"\n                  value={updatedPost.description ? updatedPost.description : \"\"}\n                  onChange={handleChange}\n              />\n            </Form.Group>\n              {/* insert form above */}\n          </Modal.Body>\n          <Modal.Footer>\n            <Button variant=\"outline-dark\" onClick={handleClose}>\n              Close\n            </Button>\n            <Button variant=\"outline-dark\" onClick={saveUpdatedPost}>\n              Save Changes\n            </Button>\n          </Modal.Footer>\n        </Modal>\n\n\n\n\n\n          {posts ? (\n              <div className=\"grid\">\n              {posts.map(post =>{\n                  return(\n                    \n                    <Card style={{ width: '18rem' }}>\n                      <Card.Body>\n                      <div key={post._id}>\n                          <h4>{post.title}</h4>\n                          <p>{post.description}</p>\n                          <div>\n                          <Button size=\"sm\" variant=\"outline-dark\"\n                          onClick={() =>\n                              updatePost(post)\n                            }\n                          >UPDATE</Button>\n                          <Button size=\"sm\" variant=\"outline-dark\" onClick={() => deletePost(post._id)}>DELETE</Button>\n                          </div>\n                      </div>\n                      </Card.Body>\n                    </Card>\n                  )\n              })}\n              </div>\n\n        ) : \"\"}\n    </div>\n  );\n\n}\n\nexport default Posts;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}